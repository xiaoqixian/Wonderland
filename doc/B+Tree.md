### **B+ Tree**

B+树是一种查询速度非常接近於二分查找的算法，时间复杂度只有$log_2n$。由于所有查询都必须要查到叶子结点的深度，所以B+树的查询性能非常稳定。

首先在学习这类数据结构时要将索引和数据分离，很多人在学习树时都是将整数作为树节点来写代码的，因为整数的索引和数据都是其本身，导致在脑内形成索引和数据不能分离的刻板印象，而在实际运用中都是数据和索引分离，比如TreeMap的实现。

索引在一些文章中又被称为**关键字**。

#### **B+树的特征**

![](https://pic3.zhimg.com/80/v2-678096c52709feddbdd03340069c6dc2_720w.jpg)

这是一棵典型的B+树，其特征为：

* 有k个子树的中间节点包含有k个元素，每个元素不保存指向数据的指针，只用来索引，所有的数据（或者说是可以找到数据的指针）都保存在叶子节点。图中是以整数为例，所以不能区分数据和索引。

  这样做的好处是中间节点可以存放更多的关键字，可以节省查找用的磁盘空间。

* 所有的叶子节点中包含了全部元素的信息，即指向含有这些元素的指针，且叶子结点本身依索引的大小自小到大顺序链接，形成一个有序链表。

* 所有的中间节点元素都存在于子节点，在子节点中是最大或最小元素。如果是最大则整棵树都是最大，最小亦然。图中是最大。

#### **B+树的查找**

![](https://tse3-mm.cn.bing.net/th/id/OIP.O0xpMaT-AtqZXVisWV-N5AHaEf?w=238&h=160&c=7&o=5&dpr=1.38&pid=1.7)

查找分为两类：**关键字查找**和**范围查找**。

**关键字查找**

关键字查找非常容易，只需要自顶向下按照大小查找即可，不多讲。

**范围查找**

范围查找即找到位于某个范围内所有索引的数据，实际上就是一个寻找上下限的问题。

首先通过关键字查找找到下限，由于所有叶子结点构成了一个有序链表，所以只需要逐渐向上查询，直到找到上限便可。

#### **B+树增加节点**

---

#### **References**

[从B树、B+树、B*树聊到R树](https://blog.csdn.net/v_july_v/article/details/6530142)